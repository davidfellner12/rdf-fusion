---
source: bench/tests/plans/bsbm_business_intelligence.rs
expression: canonicalize_uuids(&explanation.initial_logical_plan.to_string())
---
Projection: ENC_PT(feature) AS feature, ENC_PT(priceRatio) AS priceRatio
  Limit: skip=0, fetch=10
    Projection: feature, priceRatio
      Sort: ENC_SORT(DIV(withFeaturePrice, withoutFeaturePrice)) DESC NULLS FIRST, ENC_SORT(ENC_PT(feature)) ASC NULLS FIRST
        Extend: ?priceRatio DIV(withFeaturePrice, withoutFeaturePrice)
          SparqlJoin: Inner 
            Projection: feature, withFeaturePrice
              Extend: ?withFeaturePrice 00000000000000000000000000000001
                Projection: feature, 00000000000000000000000000000001
                  Aggregate: groupBy=[[feature AS feature]], aggr=[[AVG(xsd:float(xsd:string(ENC_TV(price)))) AS 00000000000000000000000000000001]]
                    SparqlJoin: Inner 
                      SparqlJoin: Inner 
                        SparqlJoin: Inner 
                          QuadPattern (?product <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/instances/ProductType48>), active_graph: Union of [DefaultGraph] 
                          QuadPattern (?product <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/productFeature> ?feature), active_graph: Union of [DefaultGraph] 
                        QuadPattern (?offer <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/product> ?product), active_graph: Union of [DefaultGraph] 
                      QuadPattern (?offer <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/price> ?price), active_graph: Union of [DefaultGraph] 
            Projection: feature, withoutFeaturePrice
              Extend: ?withoutFeaturePrice 00000000000000000000000000000002
                Projection: feature, 00000000000000000000000000000002
                  Aggregate: groupBy=[[feature AS feature]], aggr=[[AVG(xsd:float(xsd:string(ENC_TV(price)))) AS 00000000000000000000000000000002]]
                    Filter: EBV(BOOLEAN_AS_TERM(NOT EXISTS (<subquery>)))
                      Subquery:
                        Filter: outer_ref(feature) = __inner__feature AND outer_ref(product) = __inner__product
                          Projection: product AS __inner__product, feature AS __inner__feature
                            QuadPattern (?product <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/productFeature> ?feature), active_graph: Union of [DefaultGraph] 
                      SparqlJoin: Inner 
                        DistinctOn: on_expr=[[feature]], select_expr=[[feature]], sort_expr=[[feature ASC NULLS FIRST]]
                          Projection: feature
                            SparqlJoin: Inner 
                              QuadPattern (?p <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/instances/ProductType48>), active_graph: Union of [DefaultGraph] 
                              QuadPattern (?p <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/productFeature> ?feature), active_graph: Union of [DefaultGraph] 
                        SparqlJoin: Inner 
                          SparqlJoin: Inner 
                            QuadPattern (?product <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/instances/ProductType48>), active_graph: Union of [DefaultGraph] 
                            QuadPattern (?offer <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/product> ?product), active_graph: Union of [DefaultGraph] 
                          QuadPattern (?offer <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/price> ?price), active_graph: Union of [DefaultGraph]
